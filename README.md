# Where the work is

A website that visualizes entry-level job prospects for middle-skilled jobs in the UK, to help stakeholders better align labor supply & labor demand.

**Partners** 
- Burning Glass
- the Institute for Public Policy Research
- the J.P. Morgan Chase New Skills at Work initiative

## Running locally

This is a static site, using jekyll. Make sure jekyll is installed, then:

``` bash
git clone git@github.com:datamade/bg-ippr-jobs.git
cd bg-ippr-jobs

# to run locally
jekyll serve
```

Then navigate to http://localhost:5000/


## Updating data
We use Make to prepare the data.

**1. Add new data**  
The main excel file should be placed in the `data/raw/` folder.

**2. MakeFile configuration**  
Amend the source file for both the `occupation_group_data.csv` and `occupation_data.csv` jobs in `data/MakeFile` to point to the new Excel file.

**3. Prep the data**  
to prep the csv that the visualizations read in:
```
cd data/
rm occupation_data.csv
make occupation_data.csv
rm occupation_group_data.csv
make occupation_group_data.csv
```

**A note on updating geojson**

if you need to update the geojson, you'll need to do some additional setup:

a. ensure that `PG_USER` in `config.mk` is your username  
b. create the database (you'll only have to do this once)  
```
createdb burning_glass
```
c. add postgis extension
```
psql burning_glass
create extension postgis;
```
d. make sure you have the following OS dependencies (brew install these if missing): `gdal`, `postgis`  
e. make sure you have the following python libraries: `csvkit`, `psycopg2`, `MySQL-python`

Then, instead of `make occupation_data.csv`, run `make all`

## Additional notes for Windows users

### Running locally

Assuming Ruby and Jekyll are installed, install Bundler to manage Ruby dependencies:
```
gem install bundler
```

Then navigate to the root of the site and use Bundler to install required dependencies:
```
bundler install
```

Once all dependencies have installed, run the site locally, again using Bundler:
```
bundler exec jekyll serve
```

### Updating data

The data for the visualisations is generated by Python, so ensure that Python 2.7.9+ is installed (Python 2.7.9 upwards includes pip by default which will be used to install the required Python dependencies). Ensure that the Python installation folder is added to the system `PATH` environment variable.

`Make` is a GNU command not natively available on Windows. To be able to use `Make`, first install [MinGW ("Minimalist GNU for Windows")](http://www.mingw.org/). Once the setup package has installed it will launch the *MinGW Installation Manager*. From the *Basic Setup* pane, mark the following packages for installation, then from the *Installation* menu, select *Apply changes*:

* mingw-developer-toolkit
* mingw32-base
* msys-base

Once all packages have been downloaded and installed, `Make` will be found in `C:\MinGW\bin\mingw32-make.exe`. To keep consistent with Linux systems, create a named copy of this file in the same location:
```
copy C:\MinGW\bin\mingw32-make.exe C:\MinGW\bin\make.exe
```

Again, ensure that the `C:\MinGW\bin` folder has been added to the system `PATH` environment variable.

Finally use `pip` to install the required Python dependencies:
```
cd data
pip install -r requirements.txt
```

# Web dependencies
We used the following open source tools:

* [Bootstrap](http://getbootstrap.com/) - Responsive HTML, CSS and Javascript framework
* [Underscore](http://underscorejs.org/) - javascript library for working with data
* [jQuery](https://jquery.com/) - javascript library that makes javascript less painful
* [jQuery Address](https://github.com/asual/jquery-address) - javascript library creating RESTful URLs
* [Leaflet](http://leafletjs.com/) - javascript library for interactive maps

## Team

* Cathy Deng - data munging, charts, UI
* Derek Eder - maps
* Eric Van Zanten - data munging

## Errors / Bugs

If something is not behaving intuitively, it is a bug, and should be reported.
Report it here: https://github.com/datamade/bg-ippr-jobs/issues

Bug-fix pull requests welcome!

## Copyright

Copyright (c) 2016 Burning Glass Technologies and DataMade. Released under the [MIT License](https://github.com/datamade/bg-ippr-jobs/blob/master/LICENSE).
